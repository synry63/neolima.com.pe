!function($){function e(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection(e.getOption("indentWithTabs")?"	":Array(e.getOption("indentUnit")+1).join(" "),"end","+input")}function t(){clearTimeout(c),i.trigger("change")}function o(){var e=$("#customize-preview iframe").contents().find("#ref_customizer-css");e.length&&e.remove()}var i,c;$(window).load(function(){if(i=$("#textarea-custom-css"),i.length){i.hide();var n=CodeMirror.fromTextArea(document.getElementById("textarea-custom-css"),{mode:"css",lineNumbers:!0,lineWrapping:!0,extraKeys:{Tab:e}});$("#accordion-section-section_custom_css > ul.accordion-section-content").css({padding:"0"}),$("#accordion-section-section_custom_css ").on("click",function(){n.refresh(),$("#accordion-section-section_custom_css ").off("click")}),$("body").on("hover","#save",function(){t()}),n.on("change",function(){i.val(n.getValue()+" "),clearTimeout(c),c=setTimeout(t,1e3)}),i.val(n.getValue()+" "),c=setTimeout(t,1e3),setTimeout(o,3e3)}}),$(window).load(function(){function e(){c.css("height",c.height()-1+"px"),setTimeout(function(){$("#customize-preview").css("height","100%")},1e3),r.trigger("change")}function t(){if(r.is(":checked")){var e;e=1==g&&1==p?w:1==g?z:1==p?k:v,$("#customize-preview iframe").contents().find("#custom-ref-style-life").html(e)}}function i(){"no"!=l&&(y=0,s.trigger("change",["noColorRefresh"]),n.trigger("change"),o()),l="no",setTimeout(function(){l=1},1e3)}var c=$("#customize-preview"),n=$("#customize-control-ref_wc_styles input"),s=$("#customize-control-ref_theme_styles input"),r=$("#customize-control-ref_color_styles input"),a=$("#customize-control-ref_wc_styles, #customize-control-ref_theme_styles, #customize-control-ref_color_styles").find("input"),l;s.on("change",function(t,o){var i=$("#customize-preview iframe").contents(),c=i.find("#theme-css"),n=i.find("#bootstrap_css-css");s.is(":checked")?(c.length?c.attr("media","all"):i.find("#main-css").after('<link id="theme-css" type="text/css" rel="stylesheet" href="'+toolset.theme_css+'"></link>'),n.length&&n.attr("media","print")):(n.length?n.attr("media","all"):i.find("#main-css").after('<link id="bootstrap_css-css" type="text/css" rel="stylesheet" href="'+toolset.theme_css_bootstrap+'"></link>'),c.length&&c.attr("media","print")),"noColorRefresh"!=o&&e()}),n.on("change",function(){var t=$("#customize-preview iframe").contents(),o=t.find("#ref_woocommerce-css");n.is(":checked")?o.length?o.attr("media","all"):t.find("#theme-css").length?t.find("#theme-css").after('<link id="ref_woocommerce-css" type="text/css" rel="stylesheet" href="'+toolset.theme_css_woo+'"></link>'):t.find("#main-css").after('<link id="ref_woocommerce-css" type="text/css" rel="stylesheet" href="'+toolset.theme_css_woo+'"></link>'):o.length&&o.attr("media","print"),e()}),$('<div id="primary_color_control_overlay" />').appendTo("#customize-control-primary_color");var m=$("body"),d=$("#customize-control-primary_color .customize-control-content"),h=$("#primary_color_control_overlay");if(d.length&&!r.attr("disabled")){var f=d.find("input.wp-color-picker"),u=$("#primary_color_enabled"),_=$("#primary_color_disabled"),g,p,y,v,w,z,k;f.on("change",function(){m.addClass("primary-color-change"),h.css({height:d.height()+"px","margin-top":-d.height()+"px"}),a.attr("disabled",!0),y=f.val(),$.ajax({url:toolset.ajaxurl,type:"POST",data:{action:"ref_dynamic_css",customize_ajax_ref_color_styles:y,customize_ajax_ref_theme_styles:g,customize_ajax_ref_wc_styles:p},dataType:"json",success:function(e){v=e.cacheCSS,z=e.cacheCSSTheme,k=e.cacheCSSWoo,w=e.cacheCSSThemeWoo,t(),m.removeClass("primary-color-change"),a.removeAttr("disabled")}})}),r.on("change",function(){r.is(":checked")?(d.show(),u.show(),_.hide(),g=s.is(":checked")?1:0,p=n.is(":checked")?1:0,y==f.val()?t():f.trigger("change")):(d.hide(),u.hide(),_.show(),$("#customize-preview iframe").contents().find("#custom-ref-style-life").html(""))}),r.trigger("change"),document.addEventListener("animationstart",i,!1),document.addEventListener("MSAnimationStart",i,!1),document.addEventListener("webkitAnimationStart",i,!1)}})}(jQuery);